%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Array related wizardry
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\newcolumntype{I}{!{\vrule width 1.5pt}}
\newlength\savedwidth
\newcommand\whline{\noalign{\global\savedwidth\arrayrulewidth
                            \global\arrayrulewidth 1.5pt}%
           \hline
           \noalign{\global\arrayrulewidth\savedwidth}}


% ----------------------------------------------------------------

% In math mode,
% \FlaTwoByTwo{A}{B}
%             {C}{D}
% creates the picture
%   / A || B \
%   | ==  == |
%   \ C || D /

\newcommand{\FlaTwoByTwo}[4]{
\left(
\begin{array}{c I c}
#1 & #2 \\ \whline
#3 & #4
\end{array}
\right)
}

\newcommand{\FlaTwoByTwoNoPar}[4]{
\begin{array}{c I c}
#1 & #2 \\ \whline
#3 & #4
\end{array}
}

\newcommand{\FlaTwoByTwoSingleLineNoPar}[4]{
\begin{array}{c | c}
#1 & #2 \\ \hline
#3 & #4
\end{array}
}

\newcommand{\FlaTwoByTwoSingleLine}[4]{
\left(
\begin{array}{c | c}
#1 & #2 \\ \hline
#3 & #4
\end{array}
\right)
}


\newcommand{\FlaTwoByTwoNoLine}[4]{
\left(
\begin{array}{c  c}
#1 & #2 \\
#3 & #4
\end{array}
\right)
}

% In math mode,
% \FlaTwoByOne{A}
%             {C}
% creates the picture
%   / A  \
%   | == |
%   \ C  /

\newcommand{\FlaTwoByOne}[2]{
\left(
\begin{array}{c}
#1 \\ \whline
#2
\end{array}
\right)
}

\newcommand{\FlaTwoByOneNoPar}[2]{
\begin{array}{c}
#1 \\ \whline
#2
\end{array}
}

% In math mode,
% \FlaTwoByOneSingleLine{A}
%                       {C}
% creates the picture
%   / A  \
%   | -- |
%   \ C  /

\newcommand{\FlaTwoByOneSingleLine}[2]{
\left(
\begin{array}{c}
#1 \\ \hline
#2
\end{array}
\right)
}

\newcommand{\FlaTwoByOneSingleLineNoPar}[2]{
\begin{array}{c}
#1 \\ \hline
#2
\end{array}
}


\newcommand{\FlaTwoByOneNoLine}[2]{
\left(
\begin{array}{c}
#1 \\
#2
\end{array}
\right)
}

% In math mode,
% \FlaOneByTwo{A}{B}
% creates the picture
%   ( A || B )

\newcommand{\FlaOneByTwo}[2]{
\left(
\begin{array}{c I c}
#1 & #2
\end{array}
\right)
}

\newcommand{\FlaOneByTwoNoPar}[2]{
\begin{array}{c I c}
#1 & #2
\end{array}
}

\newcommand{\FlaOneByTwoSingleLine}[2]{
\left(
\begin{array}{c | c}
#1 & #2
\end{array}
\right)
}

\newcommand{\FlaOneByTwoNoLine}[2]{
\left(
\begin{array}{c c}
#1 & #2
\end{array}
\right)
}

% In math mode,
% \FlaThreeByThreeTL{A}{B}{C}
%                   {D}{E}{F}
%                   {G}{H}{I}
% creates the picture
%   / A | B || C \
%   | -- ---  -- |
%   | D | E || F |
%   | ==  ==  == |
%   \ G | H || I /
% Notice: the TL means that the
% center block (E) is part of the
% TL quadrant, where quadrants are
% partitioned by the double lines.

\newcommand{\FlaThreeByThreeTL}[9]{
\left(
\begin{array}{c | c I c}
#1 & #2 & #3 \\ \hline
#4 & #5 & #6 \\ \whline
#7 & #8 & #9
\end{array}
\right)
}

\newcommand{\FlaThreeByThreeTLNoPar}[9]{
\begin{array}{c | c I c}
#1 & #2 & #3 \\ \hline 
#4 & #5 & #6 \\ \whline 
#7 & #8 & #9 
\end{array}
}

% In math mode,
% \FlaThreeByThreeBR{A}{B}{C}
%                   {D}{E}{F}
%                   {G}{H}{I}
% creates the picture
%   / A || B | C \
%   | ==  ==  == |
%   | D || E | F |
%   | -- ---  -- |
%   \ G || H | I /
% Notice: the BR means that the
% center block (E) is part of the
% BR quadrant, where quadrants are
% partitioned by the double lines.

\newcommand{\FlaThreeByThreeBR}[9]{
\left(
\begin{array}{c I c | c}
#1 & #2 & #3 \\ \whline 
#4 & #5 & #6 \\ \hline 
#7 & #8 & #9 
\end{array}
\right) 
}

\newcommand{\FlaThreeByThreeSingleLine}[9]{
\left(
\begin{array}{c | c | c}
#1 & #2 & #3 \\ \hline
#4 & #5 & #6 \\ \hline
#7 & #8 & #9
\end{array}
\right)
}

\newcommand{\FlaThreeByThreeNoLine}[9]{
\left(
\begin{array}{c c c}
#1 & #2 & #3 \\
#4 & #5 & #6 \\
#7 & #8 & #9
\end{array}
\right)
}

\newcommand{\FlaThreeByThreeBRNoPar}[9]{
\begin{array}{c I c | c}
#1 & #2 & #3 \\ \whline 
#4 & #5 & #6 \\ \hline 
#7 & #8 & #9 
\end{array}
}

% In math mode,
% \FlaThreeByThreeTR{A}{B}{C}
%                   {D}{E}{F}
%                   {G}{H}{I}
% creates the picture
%   / A || B | C \
%   | -- ---  -- |
%   | D || E | F |
%   | ==  ==  == |
%   \ G || H | I /
% Notice: the TR means that the
% center block (E) is part of the
% TR quadrant, where quadrants are
% partitioned by the double lines.

\newcommand{\FlaThreeByThreeTR}[9]{
\left(
\begin{array}{c I c | c}
#1 & #2 & #3 \\ \hline
#4 & #5 & #6 \\ \whline
#7 & #8 & #9
\end{array}
\right)
}


% In math mode,
% \FlaThreeByThreeBL{A}{B}{C}
%                   {D}{E}{F}
%                   {G}{H}{I}
% creates the picture
%   / A | B || C \
%   | ==  ==  == |
%   | D | E || F |
%   | -- ---  -- |
%   \ G | H || I /
% Notice: the BL means that the
% center block (E) is part of the
% BL quadrant, where quadrants are
% partitioned by the double lines.

\newcommand{\FlaThreeByThreeBL}[9]{
\left(
\begin{array}{c | c I c}
#1 & #2 & #3 \\ \whline
#4 & #5 & #6 \\ \hline
#7 & #8 & #9
\end{array}
\right)
}

% In math mode,
% \FlaOneByThreeR{A}{B}{C}
% creates the picture
%   ( A || B | C )
% Notice: the R means that the
% center block (B) is part of the
% R(ight) submatrix, where
% submatrices are % partitioned
% by the double lines.

\newcommand{\FlaOneByThreeR}[3]{
\left(
\begin{array}{c I c | c}
#1 & #2 & #3
\end{array}
\right)
}

% In math mode,
% \FlaOneByThreeL{A}{B}{C}
% creates the picture
%   ( A | B || C )
% Notice: the R means that the
% center block (B) is part of the
% R(ight) submatrix, where
% submatrices are % partitioned
% by the double lines.

\newcommand{\FlaOneByThreeL}[3]{
\left(
\begin{array}{c | c I c}
#1 & #2 & #3
\end{array}
\right)
}

% In math mode,
% \FlaThreeByOneT{A}
%                {D}
%                {G}
% creates the picture
%   / A  \
%   | == |
%   | B  |
%   | -- |
%   \ C  /
% Notice: the T means that the
% center block (C) is part of the
% T(op) submatrix where submatrices
% are % partitioned by the double
% lines.

\newcommand{\FlaThreeByOneT}[3]{
\left(
\begin{array}{c}
#1 \\ \hline
#2 \\ \whline
#3
\end{array}
\right)
}

\newcommand{\FlaThreeByOneTNoPar}[3]{
\begin{array}{c}
#1 \\ \hline
#2 \\ \whline
#3
\end{array}
}

% In math mode,
% \FlaThreeByOneB{A}
%                {D}
%                {G}
% creates the picture
%   / A  \
%   | -- |
%   | B  |
%   | == |
%   \ C  /
% Notice: the B means that the
% center block (C) is part of the
% T(op) submatrix where submatrices
% are % partitioned by the double
% lines.

\newcommand{\FlaThreeByOneB}[3]{
\left(
\begin{array}{c}
#1 \\ \whline
#2 \\ \hline
#3
\end{array}
\right)
}

\newcommand{\FlaThreeByOneBNoPar}[3]{
\begin{array}{c}
#1 \\ \whline
#2 \\ \hline
#3
\end{array}
}

\newcommand{\FlaThreeByOneSingleLine}[3]{
\left(
\begin{array}{c}
#1 \\ \hline
#2 \\ \hline
#3
\end{array}
\right)
}

\newcommand{\FlaThreeByOneNoLine}[3]{
\left(
\begin{array}{c}
#1 \\
#2 \\
#3
\end{array}
\right)
}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\newcommand{\operation}{}

\newcommand{\routinename}{}

\newcommand{\precondition}{~}

\newcommand{\postcondition}{~}

\newcommand{\invariant}{~}

\newcommand{\guard}{~}

\newcommand{\partitionings}{~}

\newcommand{\partitionsizes}{~}

\newcommand{\blocksize}{blank}

\newcommand{\repartitionings}{~}

\newcommand{\repartitionsizes}{~}

\newcommand{\moveboundaries}{~}

\newcommand{\beforeupdate}{~}

\newcommand{\afterupdate}{~}

\newcommand{\update}{~}

%%%%%%%%%%%%%%

\newcommand{\resetsteps}{

\renewcommand{\operation}{\phantom{[A] = op( A )}}

\renewcommand{\routinename}{\operation}

\renewcommand{\precondition}{\phantom{A = \widehat A}}

\renewcommand{\postcondition}{\phantom{A = \widehat A}}

\renewcommand{\invariant}{\phantom{ \FlaTwoByTwo{A_{TL}}{A_{TR}}{A_{BL}}{A_{BR}} =
		\FlaTwoByTwo{A_{TL}}{A_{TR}}{A_{BL}}{A_{BR}}
		\wedge
		\FlaTwoByTwo{A_{TL}}{A_{TR}}{A_{BL}}{A_{BR}} =
		\FlaTwoByTwo{A_{TL}}{A_{TR}}{A_{BL}}{A_{BR}}~~~~~~~
		}}

\renewcommand{\blocksize}{blank}

\renewcommand{\guard}{\phantom{m( A_{BL} ) < m( A )}}

\renewcommand{\partitionings}{
$
\phantom{\FlaTwoByTwo{A_{TL}}{A_{TR}}{A_{BL}}{A_{BR}}
\rightarrow
\FlaThreeByThreeBR
   {A_{00}}{a_{01}}{A_{02}}
   {a_{10}^T}{\alpha_{11}}{a_{12}^T}
   {A_{20}}{a_{21}}{A_{22}}}   
$
}

\renewcommand{\partitionsizes}{$ \phantom{m( A )} $}

\renewcommand{\repartitionings}{
$
\phantom{\FlaTwoByTwo{A_{TL}}{A_{TR}}{A_{BL}}{A_{BR}}
\rightarrow
\FlaThreeByThreeBR
   {A_{00}}{a_{01}}{A_{02}}
   {a_{10}^T}{\alpha_{11}}{a_{12}^T}
   {A_{20}}{a_{21}}{A_{22}}}   
$
}

\renewcommand{\repartitionsizes}{$\phantom{m(A)}$}

\renewcommand{\moveboundaries}{
$
\phantom{\FlaTwoByTwo{A_{TL}}{A_{TR}}{A_{BL}}{A_{BR}}
\rightarrow
\FlaThreeByThreeBR
   {A_{00}}{a_{01}}{A_{02}}
   {a_{10}^T}{\alpha_{11}}{a_{12}^T}
   {A_{20}}{a_{21}}{A_{22}}}   
$
}

\renewcommand{\beforeupdate}{
\phantom{\FlaTwoByTwo{A_{TL}}{A_{TR}}{A_{BL}}{A_{BR}}
\rightarrow
\FlaThreeByThreeBR
   {A_{00}}{a_{01}}{A_{02}}
   {a_{10}^T}{\alpha_{11}}{a_{12}^T}
   {A_{20}}{a_{21}}{A_{22}}}   
}

\renewcommand{\afterupdate}{
\phantom{\FlaTwoByTwo{A_{TL}}{A_{TR}}{A_{BL}}{A_{BR}}
\rightarrow
\FlaThreeByThreeBR
   {A_{00}}{a_{01}}{A_{02}}
   {a_{10}^T}{\alpha_{11}}{a_{12}^T}
   {A_{20}}{a_{21}}{A_{22}}}   
}

\renewcommand{\update}{
\phantom{$
\begin{array}{l}
\\
\\
\\
\end{array}
$}
}
}

\newcommand{\NoShow}[1]{}



\newcommand{\FlaAlgorithm}{
\begin{tabular}{|l|} \hline
$\mbox{\color{blue}Algorithm:~}\routinename$
\\ \whline
\partitionings \\
$\mbox{\color{blue} ~~~where~}$ \partitionsizes 
\\ 
$\mbox{\color{blue}while~} \guard \mbox{~\color{blue} do}$
\\
\ifthenelse{\equal{\blocksize}{1}}{}%
{%
\ifthenelse{ \equal{\blocksize}{blank} }{}%
{~~~~{\bf Determine block size $ \blocksize $}\\}%
}
~~~~ 
\repartitionings \\
~~~$\mbox{\color{blue} ~~~where~}$ \repartitionsizes
\\ \hline
~~~~  \update 
\\ \hline
~~~~ 
\moveboundaries 
\\
$\mbox{\color{blue} endwhile} $
\\ \hline 
\end{tabular}
}


\newcommand{\FlaWorksheet}{
\begin{tabular}{| c | p{0.98\textwidth} |}\hline
Step & $\mbox{\color{blue}Algorithm:~}\routinename$
\\ \hline
\rowcolor{yellow!25} 
1a & $ \precondition $ 
\\ \hline
4 & 
\begin{minipage}[t]{0.9\textwidth}%
\partitionings~ \\
$\mbox{\color{blue} ~~~where~}$ \partitionsizes
\end{minipage}
\\ \hline
\rowcolor{yellow!25} 
2 & $ \invariant $ 
\\ \hline
3 &$\mbox{\color{blue}while~} \guard \mbox{~\color{blue} do}$
\\ \hline 
\rowcolor{yellow!25}
2,3 & ~~~~ $ \invariant \wedge \guard$ 
\\ \hline
5a & ~~~~ \begin{minipage}[t]{0.85\textwidth}%
\ifthenelse{\equal{\blocksize}{1}}{}%
{%
\ifthenelse{ \equal{\blocksize}{blank} }{}%
{{\bf Determine block size $ \blocksize $}\\}%
}
\repartitionings~ \\
$\mbox{\color{blue} ~~~where~}$ \repartitionsizes
\end{minipage}
\\ \hline
\rowcolor{yellow!25} 
6 & ~~~~ $\beforeupdate $
\\ \hline
8 & ~~~~  \update 
\\ \hline
5b & ~~~~ \begin{minipage}[t]{0.85\textwidth}%
\moveboundaries~
\end{minipage}
\\ \hline
\rowcolor{yellow!25}
7 & ~~~~ $\afterupdate $
\\ \hline
\rowcolor{yellow!25} 
2 & ~~~~ $ \invariant  $ 
\\ \hline
 &$\mbox{\color{blue} endwhile} $
\\ \hline 
\rowcolor{yellow!25}
2,3 & $ \invariant \wedge \neg( \guard )$ 
\\ \hline
\rowcolor{yellow!25} 
1b & $ \postcondition $ 
\\ \hline
\end{tabular}
}


\newcommand{\FlaWorksheetNine}{
\begin{tabular}{| c | p{0.98\textwidth} |}\hline
Step & $\mbox{\color{blue}Algorithm:~}\routinename$
\\ \hline
\rowcolor{yellow!25}
\phantom{1a} & $ \phantom\precondition $ 
\\ \hline
\phantom{4} & 
\begin{minipage}[t]{0.9\textwidth}%
\partitionings~ \\
$\mbox{\color{blue} ~~~where~}$ \partitionsizes
\end{minipage}
\\ \hline
\rowcolor{yellow!25}
\phantom{2} & $ \phantom\invariant $ 
\\ \hline
\phantom{3} &$\mbox{\color{blue}while~} \guard \mbox{~\color{blue} do}$
\\ \hline 
\rowcolor{yellow!25}
\phantom{2,3} & ~~~~ $ \phantom\invariant \phantom \wedge \phantom
                \guard $ 
\\ \hline
\phantom{5a} & ~~~~ \begin{minipage}[t]{0.85\textwidth}%
\ifthenelse{\equal{\blocksize}{1}}{}%
{%
\ifthenelse{ \equal{\blocksize}{blank} }{}%
{{\bf Determine block size $ \blocksize $}\\}%
}
\repartitionings~ \\
$\mbox{\color{blue} ~~~where~}$ \repartitionsizes
\end{minipage}
\\ \hline
\rowcolor{yellow!25}
\phantom{6} & ~~~~ $\phantom\beforeupdate $
\\ \hline
\phantom{8} & ~~~~  \update 
\\ \hline
\phantom{5b} & ~~~~ \begin{minipage}[t]{0.85\textwidth}% 
\moveboundaries~
\end{minipage}
\\ \hline
\rowcolor{yellow!25}
\phantom{7} & ~~~~ $\phantom\afterupdate $
\\ \hline
\rowcolor{yellow!25}
\phantom{2} & ~~~~ $ \phantom\invariant  $ 
\\ \hline
 &$\mbox{\color{blue} endwhile} $
\\ \hline 
\rowcolor{yellow!25}
\phantom{2,3} & $ \phantom{\invariant \wedge \neg( \phantom\guard )}$ 
\\ \hline
\rowcolor{yellow!25}
\phantom{1b} & $ \phantom\postcondition $ 
\\ \hline
\end{tabular}
}


\newcommand{\FlaWorksheetEight}{
\begin{tabular}{| c | p{0.98\textwidth} |}\hline
Step & $\mbox{\color{blue}Algorithm:~}\routinename$
\\ \hline
\rowcolor{yellow!25}
1a & $ \precondition $ 
\\ \hline
4 & 
\begin{minipage}[t]{0.9\textwidth}%
\partitionings~ \\
$\mbox{\color{blue} ~~~where~}$ \partitionsizes
\end{minipage}
\\ \hline
\rowcolor{yellow!25} 
2 & $ \invariant $ 
\\ \hline
3 &$\mbox{\color{blue}while~} \guard \mbox{~\color{blue} do}$
\\ \hline 
\rowcolor{yellow!25}
2,3 & ~~~~ $ \invariant \wedge \guard $ 
\\ \hline
5a & ~~~~ \begin{minipage}[t]{0.85\textwidth}%
\ifthenelse{\equal{\blocksize}{1}}{}%
{%
\ifthenelse{ \equal{\blocksize}{blank} }{}%
{{\bf Determine block size $ \blocksize $}\\}%
}
\repartitionings~ \\
$\mbox{\color{blue} ~~~where~}$ \repartitionsizes
\end{minipage}
\\ \hline
\rowcolor{yellow!25} 
6 & ~~~~ $\beforeupdate $
\\ \hline
\rowcolor{orange!50}    
8 & ~~~~  \update 
\\ \hline
5b & ~~~~ \begin{minipage}[t]{0.85\textwidth}%
\moveboundaries~
\end{minipage}
\\ \hline
\rowcolor{yellow!25}
7 & ~~~~ $\afterupdate $
\\ \hline
\rowcolor{yellow!25} 
2 & ~~~~ $ \invariant  $ 
\\ \hline
 &$\mbox{\color{blue} endwhile} $
\\ \hline 
\rowcolor{yellow!25}
2,3 & $ \invariant \wedge \neg( \guard )$ 
\\ \hline
\rowcolor{yellow!25} 
1b & $ \postcondition $ 
\\ \hline
\end{tabular}
}

\newcommand{\FlaWorksheetSeven}{
\begin{tabular}{| c | p{0.98\textwidth} |}\hline
Step & $\mbox{\color{blue}Algorithm:~}\routinename$
\\ \hline
\rowcolor{yellow!25}
1a & $ \precondition $ 
\\ \hline
4 & 
\begin{minipage}[t]{0.9\textwidth}%
\partitionings~ \\
$\mbox{\color{blue} ~~~where~}$ \partitionsizes
\end{minipage}
\\ \hline
\rowcolor{yellow!25} 
2 & $ \invariant $ 
\\ \hline
3 &$\mbox{\color{blue}while~} \guard \mbox{~\color{blue} do}$
\\ \hline 
\rowcolor{yellow!25}
2,3 & ~~~~ $ \invariant \wedge \guard$ 
\\ \hline
5a & ~~~~ \begin{minipage}[t]{0.85\textwidth}%
\ifthenelse{\equal{\blocksize}{1}}{}%
{%
\ifthenelse{ \equal{\blocksize}{blank} }{}%
{{\bf Determine block size $ \blocksize $}\\}%
}
\repartitionings~ \\
$\mbox{\color{blue} ~~~where~}$ \repartitionsizes
\end{minipage}
\\ \hline
\rowcolor{yellow!25} 
6 & ~~~~ $\beforeupdate $
\\ \hline
8 & ~~~~  \phantom\update 
\\ \hline
5b & ~~~~ \begin{minipage}[t]{0.85\textwidth}%
\moveboundaries~
\end{minipage}
\\ \hline
\rowcolor{orange!50}    
7 & ~~~~ $\afterupdate $
\\ \hline
\rowcolor{yellow!25}
2 & ~~~~ $ \invariant  $ 
\\ \hline
 &$\mbox{\color{blue} endwhile} $
\\ \hline 
\rowcolor{yellow!25}  
2 & $ \invariant \wedge \neg( \guard )$ 
\\ \hline
\rowcolor{yellow!25}
1b & $ \postcondition $ 
\\ \hline
\end{tabular}
}


\newcommand{\FlaWorksheetSix}{
\begin{tabular}{| c | p{0.98\textwidth} |}\hline
Step & $\mbox{\color{blue}Algorithm:~}\routinename$
\\ \hline
\rowcolor{yellow!25}  
1a & $ \precondition $ 
\\ \hline
4 & 
\begin{minipage}[t]{0.9\textwidth}%
\partitionings~ \\
$\mbox{\color{blue} ~~~where~}$ \partitionsizes
\end{minipage}
\\ \hline
\rowcolor{yellow!25}
2 & $ \invariant $ 
\\ \hline
3 &$\mbox{\color{blue}while~} \guard \mbox{~\color{blue} do}$
\\ \hline 
\rowcolor{yellow!25}  
2,3 & ~~~~ $ \invariant \wedge \guard $ 
\\ \hline
5a & ~~~~ \begin{minipage}[t]{0.85\textwidth}%
\ifthenelse{\equal{\blocksize}{1}}{}%
{%
\ifthenelse{ \equal{\blocksize}{blank} }{}%
{{\bf Determine block size $ \blocksize $}\\}%
}
\repartitionings~ \\
$\mbox{\color{blue} ~~~where~}$ \repartitionsizes
\end{minipage}
\\ \hline
\rowcolor{orange!50}   
6 & ~~~~ $\beforeupdate $
\\ \hline
8 & ~~~~  \phantom\update 
\\ \hline
5b & ~~~~ \begin{minipage}[t]{0.85\textwidth}%
\moveboundaries~
\end{minipage}
\\ \hline
\rowcolor{yellow!25}
7 & ~~~~ $\phantom\afterupdate $
\\ \hline
\rowcolor{yellow!25}  
2 & ~~~~ $ \invariant  $ 
\\ \hline
 &$\mbox{\color{blue} endwhile} $
\\ \hline 
\rowcolor{yellow!25}
2,3 & $ \invariant \wedge \neg( \guard )$ 
\\ \hline
1b & $ \postcondition $ 
\\ \hline
\end{tabular}
}

\newcommand{\FlaWorksheetFive}{
\begin{tabular}{| c | p{0.98\textwidth} |}\hline
Step & $\mbox{\color{blue}Algorithm:~}\routinename$
\\ \hline
\rowcolor{yellow!25}
1a & $ \precondition $ 
\\ \hline
4 & 
\begin{minipage}[t]{0.9\textwidth}%
\partitionings~ \\
$\mbox{\color{blue} ~~~where~}$ \partitionsizes
\end{minipage}
\\ \hline
\rowcolor{yellow!25}  
2 & $ \invariant $ 
\\ \hline
3 &$\mbox{\color{blue}while~} \guard \mbox{~\color{blue} do}$
\\ \hline 
\rowcolor{yellow!25}
2,3 & ~~~~ $ \invariant \wedge \guard $ 
\\ \hline
\rowcolor{orange!50}   
5a & ~~~~ \begin{minipage}[t]{0.85\textwidth}%
\ifthenelse{\equal{\blocksize}{1}}{}%
{%
\ifthenelse{ \equal{\blocksize}{blank} }{}%
{{\bf Determine block size $ \blocksize $}\\}%
}
\repartitionings~ \\
$\mbox{\color{blue} ~~~where~}$ \repartitionsizes
\end{minipage}
\\ \hline
\rowcolor{yellow!25}  
6 & ~~~~ $\phantom\beforeupdate $
\\ \hline
8 & ~~~~  \phantom\update 
\\ \hline
\rowcolor{orange!50}   
5b & ~~~~ \begin{minipage}[t]{0.85\textwidth}%
\moveboundaries~
\end{minipage}
\\ \hline
\rowcolor{yellow!25}
7 & ~~~~ $\phantom\afterupdate $
\\ \hline
\rowcolor{yellow!25}  
2 & ~~~~ $ \invariant  $ 
\\ \hline
 &$\mbox{\color{blue} endwhile} $
\\ \hline 
\rowcolor{yellow!25}
2,3 & $ \invariant \wedge \neg( \guard )$ 
\\ \hline
1b & $ \postcondition $ 
\\ \hline
\end{tabular}
}

\newcommand{\FlaWorksheetFour}{
\begin{tabular}{| c | p{0.98\textwidth} |}\hline
Step & $\mbox{\color{blue}Algorithm:~}\routinename$
\\ \hline
\rowcolor{yellow!25}
1a & $ \precondition $ 
\\ \hline
\rowcolor{orange!50}   
4 & 
\begin{minipage}[t]{0.9\textwidth}%
\partitionings~ \\
$\mbox{\color{blue} ~~~where~}$ \partitionsizes
\end{minipage}
\\ \hline
\rowcolor{yellow!25}  
2 & $ \invariant $ 
\\ \hline
3 &$\mbox{\color{blue}while~} \guard \mbox{~\color{blue} do}$
\\ \hline 
\rowcolor{yellow!25}
2,3 & ~~~~ $ \invariant \wedge \guard $ 
\\ \hline
5a & ~~~~ \begin{minipage}[t]{0.85\textwidth}%
\ifthenelse{\equal{\blocksize}{1}}{}%
{%
\ifthenelse{ \equal{\blocksize}{blank} }{}%
{{\bf Determine block size $ \phantom\blocksize $}\\}%
}
$\mbox{\phantom\repartitionings}$~ \\
$\mbox{\color{blue} ~~~where~}$ \phantom\repartitionsizes
\end{minipage}
\\ \hline
\rowcolor{yellow!25}  
6 & ~~~~ $\phantom\beforeupdate $
\\ \hline
8 & ~~~~  \phantom\update 
\\ \hline
5b & ~~~~ \begin{minipage}[t]{0.85\textwidth}%
\phantom\moveboundaries~
\end{minipage}
\\ \hline
\rowcolor{yellow!25}
7 & ~~~~ $\phantom\afterupdate $
\\ \hline
\rowcolor{yellow!25}  
2 & ~~~~ $ \invariant  $ 
\\ \hline
 &$\mbox{\color{blue} endwhile} $
\\ \hline 
\rowcolor{yellow!25}
2,3 & $ \invariant \wedge \neg( \guard )$ 
\\ \hline
1b & $ \postcondition $ 
\\ \hline
\end{tabular}
}

\newcommand{\FlaWorksheetThree}{
\begin{tabular}{| c | p{0.98\textwidth} |}\hline
Step & $\mbox{\color{blue}Algorithm:~}\routinename$
\\ \hline
\rowcolor{yellow!25}
1a & $ \precondition $ 
\\ \hline
4 & 
\begin{minipage}[t]{0.9\textwidth}% 
$\mbox{\phantom{\partitionings}}$~ \\
$\mbox{\color{blue} ~~~where~}$\phantom{\partitionsizes}  
\end{minipage}
\\ \hline
\rowcolor{yellow!25}  
2 & $ \invariant $ 
\\ \hline
\rowcolor{orange!50}  
3 &$\mbox{\color{blue}while~} \guard \mbox{~\color{blue} do}$
\\ \hline 
\rowcolor{orange!50}   
2,3 & ~~~~ $ \invariant \wedge \guard $ 
\\ \hline
5a & ~~~~ \begin{minipage}[t]{0.85\textwidth}%
\ifthenelse{\equal{\blocksize}{1}}{}%
{%
\ifthenelse{ \equal{\blocksize}{blank} }{}%
{{\bf Determine block size $ \phantom\blocksize $}\\}%
}
$\mbox{\phantom\repartitionings}$~ \\
$\mbox{\color{blue} ~~~where~}$ \phantom\repartitionsizes
\end{minipage}
\\ \hline
\rowcolor{yellow!25}
6 & ~~~~ $\phantom\beforeupdate $
\\ \hline
8 & ~~~~  \phantom\update 
\\ \hline
5b & ~~~~ \begin{minipage}[t]{0.85\textwidth}%
\phantom\moveboundaries~
\end{minipage}
\\ \hline
\rowcolor{yellow!25}  
7 & ~~~~ $\phantom\afterupdate $
\\ \hline
\rowcolor{yellow!25}
2 & ~~~~ $ \invariant  $ 
\\ \hline
 &$\mbox{\color{blue} endwhile} $
\\ \hline 
\rowcolor{orange!50}   
2,3 & $ \invariant \wedge \neg( \guard )$ 
\\ \hline
1b & $ \postcondition $ 
\\ \hline
\end{tabular}
}


\newcommand{\FlaWorksheetTwo}{
\begin{tabular}{| c | p{0.98\textwidth} |}\hline
Step & $\mbox{\color{blue}Algorithm:~}\routinename$
\\ \hline
\rowcolor{yellow!25}
1a & $ \precondition $ 
\\ \hline
4 & 
\begin{minipage}[t]{0.9\textwidth}%
$\mbox{\phantom{\partitionings}}$~ \\
$\mbox{\color{blue} ~~~where~} $ \phantom{\partitionsizes} 
\end{minipage}
\\ \hline
\rowcolor{orange!50} 
2 & $ \invariant $ 
\\ \hline
3 &$\mbox{\color{blue}while~} \phantom\guard \mbox{~\color{blue} do}$
\\ \hline 
\rowcolor{orange!50} 
2,3 & ~~~~ $ \invariant \wedge \phantom \guard $ 
\\ \hline
5a & ~~~~ \begin{minipage}[t]{0.85\textwidth}%
\ifthenelse{\equal{\blocksize}{1}}{}%
{%
\ifthenelse{ \equal{\blocksize}{blank} }{}%
{{\bf Determine block size $ \phantom\blocksize $}\\}%
}
$\mbox{\phantom\repartitionings}$~ \\
$\mbox{\color{blue} ~~~where~}$ \phantom\repartitionsizes
\end{minipage}
\\ \hline
\rowcolor{yellow!25}  
6 & ~~~~ $\phantom\beforeupdate $
\\ \hline
8 & ~~~~  \phantom\update 
\\ \hline
5b & ~~~~ \begin{minipage}[t]{0.85\textwidth}%
\phantom\moveboundaries~
\end{minipage}
\\ \hline
\rowcolor{yellow!25}
7 & ~~~~ $\phantom\afterupdate $
\\ \hline
\rowcolor{orange!50} 
2 & ~~~~ $ \invariant  $ 
\\ \hline
 &$\mbox{\color{blue} endwhile} $
\\ \hline 
\rowcolor{orange!50} 
2 & $ \invariant \wedge \neg( \phantom\guard )$ 
\\ \hline
1b & $ \postcondition $ 
\\ \hline
\end{tabular}
}

\newcommand{\FlaWorksheetOne}{
\begin{tabular}{| c | p{0.98\textwidth} |}\hline
Step & $\mbox{\color{blue}Algorithm:~}\routinename$
\\ \hline
\rowcolor{orange!50}
1a & $ \precondition $ 
\\ \hline
4 & 
\begin{minipage}[t]{0.9\textwidth}%
$\mbox{\phantom{\partitionings}}$ ~ \\
$\mbox{\color{blue} ~~~where~}$ \phantom{\partitionsizes} 
\end{minipage}
\\ \hline
\rowcolor{yellow!25}
2 & $ \phantom\invariant $ 
\\ \hline
3 &$\mbox{\color{blue}while~} \phantom\guard \mbox{~\color{blue} do}$
\\ \hline 
\rowcolor{yellow!25}  
2,3 & ~~~~ $ \phantom\invariant \wedge \phantom \guard$ 
\\ \hline
5a & ~~~~ \begin{minipage}[t]{0.85\textwidth}%
\ifthenelse{\equal{\blocksize}{1}}{}%
{%
\ifthenelse{ \equal{\blocksize}{blank} }{}%
{{\bf Determine block size $ \phantom\blocksize $}\\}%
}
$\mbox{\phantom\repartitionings}$ ~ \\
$\mbox{\color{blue} ~~~where~}$ \phantom\repartitionsizes
\end{minipage}
\\ \hline
\rowcolor{yellow!25}
6 & ~~~~ $\phantom\beforeupdate $
\\ \hline
8 & ~~~~  \phantom\update 
\\ \hline
5b & ~~~~ \begin{minipage}[t]{0.85\textwidth}%
\phantom\moveboundaries~
\end{minipage}
\\ \hline
\rowcolor{yellow!25}  
7 & ~~~~ $\phantom\afterupdate $
\\ \hline
\rowcolor{yellow!25}
2 & ~~~~ $ \phantom\invariant  $ 
\\ \hline
 &$\mbox{\color{blue} endwhile} $
\\ \hline
\rowcolor{yellow!25}  
2,3 & $ \phantom\invariant \wedge \neg( \phantom\guard )$ 
\\ \hline
\rowcolor{orange!50}
1b & $ \postcondition $ 
\\ \hline
\end{tabular}
}

\newcommand{\FlaWorksheetZero}{
\begin{tabular}{| c | p{0.98\textwidth} |}\hline
Step & $\mbox{\color{blue}Algorithm:~}\routinename$
\\ \hline
\rowcolor{yellow!25}
1a & $ \phantom\precondition $ 
\\ \hline
4 & 
\begin{minipage}[t]{0.9\textwidth}%
$\mbox{\phantom{\partitionings}}$ ~ \\
$\mbox{\color{blue} ~~~where~}$ \phantom{\partitionsizes} 
\end{minipage}
\\ \hline
\rowcolor{yellow!25}
2 & $ \phantom\invariant $ 
\\ \hline
3 &$\mbox{\color{blue}while~} \phantom\guard \mbox{~\color{blue} do}$
\\ \hline 
\rowcolor{yellow!25}  
2,3 & ~~~~ $ \phantom\invariant \wedge \phantom \guard$ 
\\ \hline
5a & ~~~~ \begin{minipage}[t]{0.85\textwidth}%
\ifthenelse{\equal{\blocksize}{1}}{}%
{%
\ifthenelse{ \equal{\blocksize}{blank} }{}%
{{\bf Determine block size $ \phantom\blocksize $}\\}%
}
$\mbox{\phantom\repartitionings}$~ \\
$\mbox{\color{blue} ~~~where~}$ \phantom\repartitionsizes
\end{minipage}
\\ \hline
\rowcolor{yellow!25}
6 & ~~~~ $\phantom\beforeupdate $
\\ \hline
8 & ~~~~  \phantom\update 
\\ \hline
5b & ~~~~ \begin{minipage}[t]{0.85\textwidth}%
\phantom\moveboundaries~
\end{minipage}
\\ \hline
\rowcolor{yellow!25}
7 & ~~~~ $\phantom\afterupdate $
\\ \hline
\rowcolor{yellow!25}
2 & ~~~~ $ \phantom\invariant  $ 
\\ \hline
 &$\mbox{\color{blue} endwhile} $
\\ \hline 
\rowcolor{yellow!25}  
2,3 & $ \phantom\invariant \wedge \neg( \phantom\guard )$ 
\\ \hline
\rowcolor{yellow!25}
1b & $ \postcondition $ 
\\ \hline
\end{tabular}
}



